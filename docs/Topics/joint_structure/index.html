<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/miko-unity-docs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/miko-unity-docs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(5)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(5) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(5) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(5) > ul.nav-list { display: block; } </style> <script src="/miko-unity-docs/assets/js/vendor/lunr.min.js"></script> <script src="/miko-unity-docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Joint Structure | MikoMiko Poser</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Joint Structure" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Developer documentation site for the MikoMiko Unity Poser." /> <meta property="og:description" content="Developer documentation site for the MikoMiko Unity Poser." /> <link rel="canonical" href="https://therarefox.github.io/miko-unity-docs/docs/Topics/joint_structure/" /> <meta property="og:url" content="https://therarefox.github.io/miko-unity-docs/docs/Topics/joint_structure/" /> <meta property="og:site_name" content="MikoMiko Poser" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Joint Structure" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Developer documentation site for the MikoMiko Unity Poser.","headline":"Joint Structure","url":"https://therarefox.github.io/miko-unity-docs/docs/Topics/joint_structure/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/miko-unity-docs/" class="site-title lh-tight"> MikoMiko Poser </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/miko-unity-docs/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/overview/" class="nav-list-link">Project Overview</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/deployment/" class="nav-list-link">Deployment Guide</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Topics category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/miko-unity-docs/docs/Topics/" class="nav-list-link">Topics</a><ul class="nav-list"><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/camera_movement/" class="nav-list-link">Camera Movement</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/scene_initalisation/" class="nav-list-link">Scene Initialization</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/hand_editor/" class="nav-list-link">Hand Editor</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/rendering_posekun/" class="nav-list-link">Rendering Posekun</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/joint_structure/" class="nav-list-link">Joint Structure</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/inverse_kinematics/" class="nav-list-link">Inverse Kinematics</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/rotation_gizmo/" class="nav-list-link">Rotation Gizmo</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/blinking_indicators/" class="nav-list-link">Blinking Indicators</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/joint_restriction/" class="nav-list-link">Joint Restriction</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/layers_and_tags/" class="nav-list-link">Layers and Tags</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/posekun_modifications/" class="nav-list-link">Posekun Modifications</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/loading_poses/" class="nav-list-link">Loading Poses</a></li></ul></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/classes/" class="nav-list-link">Classes</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MikoMiko Poser" aria-label="Search MikoMiko Poser" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/just-the-docs/just-the-docs-template" class="site-button" > Template Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/miko-unity-docs/docs/Topics/">Topics</a></li> <li class="breadcrumb-nav-list-item"><span>Joint Structure</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="joint-structure"> <a href="#joint-structure" class="anchor-heading" aria-labelledby="joint-structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Structure </h1> <p class="fs-6 fw-300">Understanding the hierarchical bone system and joint organization used for pose manipulation.</p> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h2> <ol id="markdown-toc"> <li><a href="#overview" id="markdown-toc-overview">Overview</a></li> <li><a href="#hierarchical-organization" id="markdown-toc-hierarchical-organization">Hierarchical Organization</a> <ol> <li><a href="#root-structure" id="markdown-toc-root-structure">Root Structure</a></li> <li><a href="#joint-naming-convention" id="markdown-toc-joint-naming-convention">Joint Naming Convention</a></li> </ol> </li> <li><a href="#major-joint-groups" id="markdown-toc-major-joint-groups">Major Joint Groups</a> <ol> <li><a href="#spine-chain" id="markdown-toc-spine-chain">Spine Chain</a></li> <li><a href="#arm-chains-leftright" id="markdown-toc-arm-chains-leftright">Arm Chains (Left/Right)</a></li> <li><a href="#leg-chains-leftright" id="markdown-toc-leg-chains-leftright">Leg Chains (Left/Right)</a></li> </ol> </li> <li><a href="#joint-properties" id="markdown-toc-joint-properties">Joint Properties</a> <ol> <li><a href="#transform-components" id="markdown-toc-transform-components">Transform Components</a></li> <li><a href="#joint-constraints" id="markdown-toc-joint-constraints">Joint Constraints</a></li> <li><a href="#movement-types" id="markdown-toc-movement-types">Movement Types</a></li> </ol> </li> <li><a href="#joint-management-system" id="markdown-toc-joint-management-system">Joint Management System</a> <ol> <li><a href="#jointmanager-script" id="markdown-toc-jointmanager-script">JointManager Script</a></li> <li><a href="#jointloader-script" id="markdown-toc-jointloader-script">JointLoader Script</a></li> </ol> </li> <li><a href="#joint-manipulation" id="markdown-toc-joint-manipulation">Joint Manipulation</a> <ol> <li><a href="#direct-manipulation" id="markdown-toc-direct-manipulation">Direct Manipulation</a></li> <li><a href="#inverse-kinematics-ik" id="markdown-toc-inverse-kinematics-ik">Inverse Kinematics (IK)</a></li> <li><a href="#forward-kinematics-fk" id="markdown-toc-forward-kinematics-fk">Forward Kinematics (FK)</a></li> </ol> </li> <li><a href="#joint-visualization" id="markdown-toc-joint-visualization">Joint Visualization</a> <ol> <li><a href="#joint-indicators" id="markdown-toc-joint-indicators">Joint Indicators</a></li> <li><a href="#selection-feedback" id="markdown-toc-selection-feedback">Selection Feedback</a></li> </ol> </li> <li><a href="#data-structure" id="markdown-toc-data-structure">Data Structure</a> <ol> <li><a href="#joint-definition-format" id="markdown-toc-joint-definition-format">Joint Definition Format</a></li> <li><a href="#runtime-joint-data" id="markdown-toc-runtime-joint-data">Runtime Joint Data</a></li> </ol> </li> <li><a href="#performance-optimization" id="markdown-toc-performance-optimization">Performance Optimization</a> <ol> <li><a href="#joint-culling" id="markdown-toc-joint-culling">Joint Culling</a></li> <li><a href="#constraint-caching" id="markdown-toc-constraint-caching">Constraint Caching</a></li> </ol> </li> <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a> <ol> <li><a href="#broken-joint-hierarchy" id="markdown-toc-broken-joint-hierarchy">Broken Joint Hierarchy</a></li> <li><a href="#joint-constraint-violations" id="markdown-toc-joint-constraint-violations">Joint Constraint Violations</a></li> <li><a href="#missing-joint-visualizations" id="markdown-toc-missing-joint-visualizations">Missing Joint Visualizations</a></li> </ol> </li> </ol><hr /> <h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h2> <p>The joint structure forms the backbone of the pose manipulation system. It defines how bones are connected, how they move in relation to each other, and provides the foundation for realistic human pose creation.</p> <h2 id="hierarchical-organization"> <a href="#hierarchical-organization" class="anchor-heading" aria-labelledby="hierarchical-organization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hierarchical Organization </h2> <h3 id="root-structure"> <a href="#root-structure" class="anchor-heading" aria-labelledby="root-structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Root Structure </h3> <p>The character’s joint hierarchy follows anatomical organization:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Root (Hip/Pelvis)
├── Spine
│   ├── Chest
│   │   ├── Neck
│   │   │   └── Head
│   │   ├── Left Shoulder
│   │   │   └── Left Arm Chain
│   │   └── Right Shoulder
│   │       └── Right Arm Chain
├── Left Hip
│   └── Left Leg Chain
└── Right Hip
    └── Right Leg Chain
</code></pre></div></div> <h3 id="joint-naming-convention"> <a href="#joint-naming-convention" class="anchor-heading" aria-labelledby="joint-naming-convention"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Naming Convention </h3> <p>Joints follow a consistent naming pattern:</p> <ul> <li><strong>Prefix</strong>: Body side (L/R for Left/Right, or none for center)</li> <li><strong>Body Part</strong>: Descriptive name (Shoulder, Elbow, Knee, etc.)</li> <li><strong>Suffix</strong>: Joint type or position when applicable</li> </ul> <h2 id="major-joint-groups"> <a href="#major-joint-groups" class="anchor-heading" aria-labelledby="major-joint-groups"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Major Joint Groups </h2> <h3 id="spine-chain"> <a href="#spine-chain" class="anchor-heading" aria-labelledby="spine-chain"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spine Chain </h3> <p><strong>Purpose</strong>: Core body movement and posture</p> <ul> <li><strong>Hip/Root</strong>: Foundation joint for entire character</li> <li><strong>Spine</strong>: Lower back flexibility</li> <li><strong>Chest</strong>: Upper torso rotation and bending</li> <li><strong>Neck</strong>: Head orientation support</li> <li><strong>Head</strong>: Final orientation point</li> </ul> <h3 id="arm-chains-leftright"> <a href="#arm-chains-leftright" class="anchor-heading" aria-labelledby="arm-chains-leftright"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Arm Chains (Left/Right) </h3> <p><strong>Purpose</strong>: Upper limb manipulation</p> <ul> <li><strong>Shoulder</strong>: Arm attachment and lifting</li> <li><strong>Upper Arm</strong>: Major arm rotation</li> <li><strong>Elbow</strong>: Arm bending joint</li> <li><strong>Forearm</strong>: Wrist rotation support</li> <li><strong>Wrist</strong>: Hand attachment point</li> <li><strong>Hand</strong>: Finger base connection</li> </ul> <h3 id="leg-chains-leftright"> <a href="#leg-chains-leftright" class="anchor-heading" aria-labelledby="leg-chains-leftright"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Leg Chains (Left/Right) </h3> <p><strong>Purpose</strong>: Lower limb and locomotion</p> <ul> <li><strong>Hip</strong>: Leg attachment and lifting</li> <li><strong>Upper Leg</strong>: Major leg rotation</li> <li><strong>Knee</strong>: Leg bending joint</li> <li><strong>Lower Leg</strong>: Ankle rotation support</li> <li><strong>Ankle</strong>: Foot attachment point</li> <li><strong>Foot</strong>: Ground connection and balance</li> </ul> <h2 id="joint-properties"> <a href="#joint-properties" class="anchor-heading" aria-labelledby="joint-properties"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Properties </h2> <h3 id="transform-components"> <a href="#transform-components" class="anchor-heading" aria-labelledby="transform-components"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Transform Components </h3> <p>Each joint contains essential transform data:</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Joint</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">position</span><span class="p">;</span>    <span class="c1">// 3D world position</span>
    <span class="k">public</span> <span class="n">Quaternion</span> <span class="n">rotation</span><span class="p">;</span> <span class="c1">// 3D rotation</span>
    <span class="k">public</span> <span class="n">Vector3</span> <span class="n">scale</span><span class="p">;</span>       <span class="c1">// Joint scaling (usually uniform)</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">parent</span><span class="p">;</span>    <span class="c1">// Parent joint reference</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Transform</span><span class="p">&gt;</span> <span class="n">children</span><span class="p">;</span> <span class="c1">// Child joints</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="joint-constraints"> <a href="#joint-constraints" class="anchor-heading" aria-labelledby="joint-constraints"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Constraints </h3> <p>Joints have anatomical limitations:</p> <ul> <li><strong>Rotation Limits</strong>: Maximum/minimum rotation angles</li> <li><strong>Axis Restrictions</strong>: Which axes can rotate</li> <li><strong>Dependency Rules</strong>: How child joints are affected by parents</li> </ul> <h3 id="movement-types"> <a href="#movement-types" class="anchor-heading" aria-labelledby="movement-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Movement Types </h3> <p>Different joints support different movement types:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Joint Type</th> <th>Rotation Axes</th> <th>Example Joints</th> </tr> </thead> <tbody> <tr> <td>Ball Joint</td> <td>X, Y, Z</td> <td>Shoulder, Hip</td> </tr> <tr> <td>Hinge Joint</td> <td>Single Axis</td> <td>Elbow, Knee</td> </tr> <tr> <td>Pivot Joint</td> <td>Single Rotation</td> <td>Neck, Wrist</td> </tr> <tr> <td>Fixed Joint</td> <td>No Movement</td> <td>Rigid connections</td> </tr> </tbody> </table></div> <h2 id="joint-management-system"> <a href="#joint-management-system" class="anchor-heading" aria-labelledby="joint-management-system"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Management System </h2> <h3 id="jointmanager-script"> <a href="#jointmanager-script" class="anchor-heading" aria-labelledby="jointmanager-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JointManager Script </h3> <p>Central controller for joint operations:</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Key responsibilities:</span>
<span class="p">-</span> <span class="n">Joint</span> <span class="n">hierarchy</span> <span class="n">maintenance</span>
<span class="p">-</span> <span class="n">Constraint</span> <span class="n">enforcement</span>  
<span class="p">-</span> <span class="n">Position</span><span class="p">/</span><span class="n">rotation</span> <span class="n">updates</span>
<span class="p">-</span> <span class="n">Parent</span><span class="p">-</span><span class="n">child</span> <span class="n">relationship</span> <span class="n">management</span>
</code></pre></div></div> <h3 id="jointloader-script"> <a href="#jointloader-script" class="anchor-heading" aria-labelledby="jointloader-script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JointLoader Script </h3> <p>Handles joint data loading and initialization:</p> <ul> <li>Loads joint definitions from data files</li> <li>Establishes parent-child relationships</li> <li>Applies initial joint constraints</li> <li>Sets up joint visualization</li> </ul> <h2 id="joint-manipulation"> <a href="#joint-manipulation" class="anchor-heading" aria-labelledby="joint-manipulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Manipulation </h2> <h3 id="direct-manipulation"> <a href="#direct-manipulation" class="anchor-heading" aria-labelledby="direct-manipulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Direct Manipulation </h3> <p>Joints can be directly manipulated through:</p> <ul> <li><strong>Mouse dragging</strong>: Direct joint positioning</li> <li><strong>Transform gizmos</strong>: Precise rotation control</li> <li><strong>Keyboard shortcuts</strong>: Quick adjustments</li> <li><strong>Value input</strong>: Exact numerical positioning</li> </ul> <h3 id="inverse-kinematics-ik"> <a href="#inverse-kinematics-ik" class="anchor-heading" aria-labelledby="inverse-kinematics-ik"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inverse Kinematics (IK) </h3> <p>Automatic joint positioning through IK solving:</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example: Position hand, automatically adjust arm joints</span>
<span class="n">IKSolver</span><span class="p">.</span><span class="nf">SetTargetPosition</span><span class="p">(</span><span class="n">handJoint</span><span class="p">,</span> <span class="n">targetPosition</span><span class="p">);</span>
<span class="n">IKSolver</span><span class="p">.</span><span class="nf">Solve</span><span class="p">();</span> <span class="c1">// Calculates elbow and shoulder positions</span>
</code></pre></div></div> <h3 id="forward-kinematics-fk"> <a href="#forward-kinematics-fk" class="anchor-heading" aria-labelledby="forward-kinematics-fk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Forward Kinematics (FK) </h3> <p>Manual joint-by-joint positioning:</p> <ul> <li>Move parent joints to affect children</li> <li>Build poses from core outward</li> <li>Full control over each joint angle</li> </ul> <h2 id="joint-visualization"> <a href="#joint-visualization" class="anchor-heading" aria-labelledby="joint-visualization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Visualization </h2> <h3 id="joint-indicators"> <a href="#joint-indicators" class="anchor-heading" aria-labelledby="joint-indicators"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Indicators </h3> <p>Visual representation system:</p> <ul> <li><strong>Indicator Prefab</strong>: Standard joint visualization marker</li> <li><strong>JointIndicators Prefab</strong>: Animated feedback for active joints</li> <li><strong>Color Coding</strong>: Different colors for different joint types</li> <li><strong>Size Scaling</strong>: Joint importance indicated by marker size</li> </ul> <h3 id="selection-feedback"> <a href="#selection-feedback" class="anchor-heading" aria-labelledby="selection-feedback"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Selection Feedback </h3> <p>When joints are selected:</p> <ul> <li><strong>Highlight Effect</strong>: Selected joint stands out visually</li> <li><strong>Gizmo Display</strong>: Rotation/position gizmos appear</li> <li><strong>Information Panel</strong>: Joint properties shown in UI</li> </ul> <h2 id="data-structure"> <a href="#data-structure" class="anchor-heading" aria-labelledby="data-structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Structure </h2> <h3 id="joint-definition-format"> <a href="#joint-definition-format" class="anchor-heading" aria-labelledby="joint-definition-format"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Definition Format </h3> <p>Joints are defined using structured data:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LeftShoulder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chest"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">1.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">],</span><span class="w">
  </span><span class="nl">"rotation"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
  </span><span class="nl">"constraints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"minRotation"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">-45</span><span class="p">,</span><span class="w"> </span><span class="mi">-180</span><span class="p">,</span><span class="w"> </span><span class="mi">-90</span><span class="p">],</span><span class="w">
    </span><span class="nl">"maxRotation"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="runtime-joint-data"> <a href="#runtime-joint-data" class="anchor-heading" aria-labelledby="runtime-joint-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Runtime Joint Data </h3> <p>During execution, joints maintain:</p> <ul> <li>Current transform state</li> <li>Reference to original bind pose</li> <li>Constraint information</li> <li>Parent/child relationships</li> <li>Visualization components</li> </ul> <h2 id="performance-optimization"> <a href="#performance-optimization" class="anchor-heading" aria-labelledby="performance-optimization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Performance Optimization </h2> <h3 id="joint-culling"> <a href="#joint-culling" class="anchor-heading" aria-labelledby="joint-culling"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Culling </h3> <p>Optimize performance by:</p> <ul> <li><strong>LOD System</strong>: Reduce joint detail at distance</li> <li><strong>Frustum Culling</strong>: Hide joints outside camera view</li> <li><strong>Update Frequency</strong>: Reduce update rate for distant joints</li> </ul> <h3 id="constraint-caching"> <a href="#constraint-caching" class="anchor-heading" aria-labelledby="constraint-caching"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Constraint Caching </h3> <ul> <li><strong>Pre-calculate</strong> constraint boundaries</li> <li><strong>Cache</strong> frequently accessed joint relationships</li> <li><strong>Batch</strong> joint updates when possible</li> </ul> <h2 id="troubleshooting"> <a href="#troubleshooting" class="anchor-heading" aria-labelledby="troubleshooting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting </h2> <h3 id="broken-joint-hierarchy"> <a href="#broken-joint-hierarchy" class="anchor-heading" aria-labelledby="broken-joint-hierarchy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Broken Joint Hierarchy </h3> <ul> <li><strong>Symptom</strong>: Child joints not following parents</li> <li><strong>Solution</strong>: Verify parent-child relationships in JointManager</li> <li><strong>Prevention</strong>: Don’t manually modify joint parents at runtime</li> </ul> <h3 id="joint-constraint-violations"> <a href="#joint-constraint-violations" class="anchor-heading" aria-labelledby="joint-constraint-violations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Joint Constraint Violations </h3> <ul> <li><strong>Symptom</strong>: Unnatural joint positions</li> <li><strong>Solution</strong>: Enable constraint enforcement in JointManager</li> <li><strong>Debug</strong>: Check joint rotation limits are properly set</li> </ul> <h3 id="missing-joint-visualizations"> <a href="#missing-joint-visualizations" class="anchor-heading" aria-labelledby="missing-joint-visualizations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Missing Joint Visualizations </h3> <ul> <li><strong>Symptom</strong>: Joints not visible in scene</li> <li><strong>Solution</strong>: Verify Indicator prefabs are assigned</li> <li><strong>Check</strong>: Joint visualization layer is visible in camera</li> </ul><hr /> <p><em>For information about joint constraints and limitations, see <a href="joint_restriction.html">Joint Restriction</a>. For IK implementation details, see <a href="inverse_kinematics.html">Inverse Kinematics</a>.</em></p> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/just-the-docs/just-the-docs/tree/main/docs/Topics/joint_structure.md" id="edit-this-page">Edit this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>

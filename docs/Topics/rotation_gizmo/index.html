<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/miko-unity-docs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/miko-unity-docs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(4) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/miko-unity-docs/assets/js/vendor/lunr.min.js"></script> <script src="/miko-unity-docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Rotation Gizmo | MikoMiko Poser</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Rotation Gizmo" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Developer documentation site for the MikoMiko Unity Poser." /> <meta property="og:description" content="Developer documentation site for the MikoMiko Unity Poser." /> <link rel="canonical" href="https://therarefox.github.io/miko-unity-docs/docs/Topics/rotation_gizmo/" /> <meta property="og:url" content="https://therarefox.github.io/miko-unity-docs/docs/Topics/rotation_gizmo/" /> <meta property="og:site_name" content="MikoMiko Poser" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Rotation Gizmo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Developer documentation site for the MikoMiko Unity Poser.","headline":"Rotation Gizmo","url":"https://therarefox.github.io/miko-unity-docs/docs/Topics/rotation_gizmo/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/miko-unity-docs/" class="site-title lh-tight"> MikoMiko Poser </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/miko-unity-docs/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/overview/" class="nav-list-link">Project Overview</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/deployment/" class="nav-list-link">Deployment Guide</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Topics category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/miko-unity-docs/docs/Topics/" class="nav-list-link">Topics</a><ul class="nav-list"><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/scene_initalisation/" class="nav-list-link">Scene Initialization</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/rendering_posekun/" class="nav-list-link">Rendering Posekun</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/inverse_kinematics/" class="nav-list-link">Inverse Kinematics</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/rotation_gizmo/" class="nav-list-link">Rotation Gizmo</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/joint_structure/" class="nav-list-link">Joint Structure</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/loading_poses/" class="nav-list-link">Loading Poses</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/camera_movement/" class="nav-list-link">Camera Movement</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/joint_restriction/" class="nav-list-link">Joint Restriction</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/posekun_modifications/" class="nav-list-link">Posekun Modifications</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/blinking_indicators/" class="nav-list-link">Blinking Indicators</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/layers_and_tags/" class="nav-list-link">Layers and Tags</a></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/Topics/hand_editor/" class="nav-list-link">Hand Editor</a></li></ul></li><li class="nav-list-item"><a href="/miko-unity-docs/docs/classes/" class="nav-list-link">Classes</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MikoMiko Poser" aria-label="Search MikoMiko Poser" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/just-the-docs/just-the-docs-template" class="site-button" > Template Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/miko-unity-docs/docs/Topics/">Topics</a></li> <li class="breadcrumb-nav-list-item"><span>Rotation Gizmo</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="rotation-gizmo"> <a href="#rotation-gizmo" class="anchor-heading" aria-labelledby="rotation-gizmo"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rotation Gizmo </h1> <p class="fs-6 fw-300">Interactive 3D rotation tools for precise joint manipulation and pose adjustment.</p><hr /> <h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h2> <p>The rotation gizmo allows the user to directly rotate the selected joint.</p> <p class="text-center"><img src="../../../assets/topics/rotation_gizmo1.PNG" alt="Image" /></p> <p>https://github.com/HiddenMonk/Unity3DRuntimeTransformGizmo The runtime transform gizmo of this project uses the above plugin by HiddenMonk. SetTarget is mainly used to get the current target for the gizmo. There are also modifications made to TransformGizmo.cs for this project.</p> <h2 id="related-classes"> <a href="#related-classes" class="anchor-heading" aria-labelledby="related-classes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Related Classes </h2> <p>Poser Documentation: SetTarget Poser Documentation: TransformGizmo</p> <!-- The Rotation Gizmo system provides intuitive 3D manipulation tools that allow users to rotate joints by dragging visual handles in 3D space. This system makes pose creation more intuitive by providing direct visual feedback and control. ## Gizmo Components ### Transform Gizmo Script **Location**: Attached to `mainCamera` GameObject **Purpose**: Manages the visual rotation handles and interaction system ### Gizmo Elements The rotation gizmo consists of several visual components: - **X-Axis Ring**: Red circular handle for X-axis rotation - **Y-Axis Ring**: Green circular handle for Y-axis rotation - **Z-Axis Ring**: Blue circular handle for Z-axis rotation - **Screen Space Ring**: Yellow handle for screen-relative rotation - **Center Sphere**: Multi-axis rotation handle ## Gizmo Interaction ### Mouse Controls - **Left Click + Drag**: Rotate around selected axis - **Hover**: Highlight the axis ring being targeted - **Release**: Commit rotation change - **Right Click**: Cancel current rotation operation ### Visual Feedback - **Color Highlighting**: Hovered axis becomes brighter - **Rotation Preview**: Real-time rotation as you drag - **Snap Indicators**: Visual guides for common angles (15°, 30°, 45°, 90°) ### Coordinate Systems The gizmo can operate in different coordinate spaces: #### Local Space - **Gizmo aligns** with joint's local orientation - **Rotations follow** joint's natural axes - **Best for**: Anatomical rotations (bend elbow, rotate wrist) #### World Space - **Gizmo aligns** with world X, Y, Z axes - **Rotations are** global regardless of joint orientation - **Best for**: Absolute positioning and alignment #### Screen Space - **Gizmo aligns** with camera view - **Rotations are** relative to screen orientation - **Best for**: Quick adjustments from current view angle ## Gizmo Behavior ### Automatic Sizing The gizmo automatically adjusts its size based on: - **Distance to Camera**: Maintains consistent screen size - **Joint Importance**: Larger gizmos for major joints - **Selection State**: Selected joints get larger gizmos ### Context Sensitivity Gizmo appearance changes based on: - **Joint Type**: Different styles for different joint types - **Constraint Status**: Visual indicators for rotation limits - **Lock State**: Grayed out axes that are locked or constrained ## Advanced Gizmo Features ### Rotation Constraints The gizmo respects joint limitations: ```csharp // Example: Elbow can only bend on one axis if (joint.constrainedAxes.Contains(Axis.X)) { gizmo.DisableXRotation(); } ``` ### Snap Rotation Hold **Shift** while dragging to enable angle snapping: - **15° increments**: Fine control snapping - **45° increments**: Quick positioning snapping - **90° increments**: Right-angle snapping - **Custom angles**: User-defined snap values ### Multi-Joint Rotation Select multiple joints to rotate them simultaneously: - **Proportional**: Each joint rotates by same amount - **Relative**: Rotations applied relative to each joint's current state - **Constrained**: Respects individual joint constraints ## Gizmo Customization ### Visual Settings Customize gizmo appearance: | Setting | Description | Default | |---------|-------------|---------| | Ring Thickness | Width of rotation rings | 0.05 | | Ring Radius | Size of rotation handles | 1.0 | | Color Scheme | Colors for X/Y/Z axes | Red/Green/Blue | | Transparency | Handle opacity | 0.8 | | Highlight Intensity | Brightness when hovered | 1.5x | ### Sensitivity Settings Adjust rotation responsiveness: | Setting | Description | Default | |---------|-------------|---------| | Rotation Speed | Mouse movement to rotation ratio | 1.0 | | Snap Tolerance | Distance for snap activation | 5° | | Damping | Smoothing for rotation updates | 0.1 | ## Integration with Joint System ### Joint Selection The gizmo appears when joints are selected: ```csharp // When joint is selected if (selectedJoint != null) { gizmo.SetTarget(selectedJoint); gizmo.SetVisible(true); } ``` ### Constraint Integration Gizmo respects joint constraints automatically: - **Rotation limits** prevent over-rotation - **Locked axes** are disabled in gizmo - **Constraint feedback** shows valid rotation ranges ### Undo/Redo Support All gizmo rotations support undo system: - **Command Pattern**: Each rotation is a reversible command - **State Tracking**: Before/after joint states stored - **Batch Operations**: Multiple joint rotations grouped ## Performance Optimization ### LOD System Gizmo detail adjusts based on distance: - **Close**: Full detail with all rings and handles - **Medium**: Simplified rings, fewer segments - **Far**: Basic handles only - **Very Far**: Gizmo hidden entirely ### Update Frequency Optimize gizmo updates: ```csharp // Only update when joint is selected and moving if (joint.IsSelected && Input.GetMouseButton(0)) { gizmo.UpdateRotation(); } ``` ### Culling Hide gizmos outside camera view: - **Frustum culling**: Don't render off-screen gizmos - **Occlusion culling**: Hide gizmos behind geometry - **Selection priority**: Always show selected joint gizmos ## Troubleshooting ### Gizmo Not Appearing - **Check**: Joint is properly selected - **Verify**: Transform Gizmo Script is enabled on camera - **Ensure**: Gizmo layer is visible in camera settings ### Incorrect Rotation Behavior - **Verify**: Coordinate space setting (Local vs World vs Screen) - **Check**: Joint constraints are properly configured - **Debug**: Mouse input is being received correctly ### Performance Issues - **Reduce**: Gizmo LOD distances for better performance - **Limit**: Number of simultaneous gizmos - **Optimize**: Gizmo mesh complexity ### Gizmo Scale Issues - **Adjust**: Auto-sizing settings in Transform Gizmo Script - **Check**: Camera distance calculations - **Verify**: Screen space conversion is working correctly ## Best Practices ### Efficient Posing Workflow 1. **Select joint** you want to rotate 2. **Choose appropriate** coordinate space (Local/World/Screen) 3. **Use snap rotation** for precise angles 4. **Rotate major joints** first, then fine-tune 5. **Check constraints** to ensure realistic poses ### Gizmo Usage Tips - **Use Local space** for anatomical rotations - **Use World space** for absolute positioning - **Use Screen space** for quick view-relative adjustments - **Hold Shift** for angle snapping - **Use multiple selection** for symmetrical poses --- *For more information about joint constraints, see [Joint Restriction](joint_restriction.html). For camera controls, see [Camera Movement](camera_movement.html).* --> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/just-the-docs/just-the-docs/tree/main/docs/Topics/rotation_gizmo.md" id="edit-this-page">Edit this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
